{"ast":null,"code":"var _jsxFileName = \"/Users/My Disk D/Developt/some_shop/src/components/Products/SingleProduct.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { useGetProductQuery } from \"../../features/api/apiSlice\";\nimport { getRelatedProducts } from \"../../features/products/productsSlice\";\nimport { ROUTES } from \"../../utils/routes\";\nimport Product from \"./Product\";\nimport Products from \"./Products\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SingleProduct = () => {\n  _s();\n  const dispatch = useDispatch();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    list,\n    related\n  } = useSelector(({\n    products\n  }) => products);\n  const {\n    data,\n    isLoading,\n    isFetching,\n    isSuccess,\n    isError\n  } = useGetProductQuery({\n    id\n  });\n  useEffect(() => {\n    if (isError) {\n      // Handle error, display error message, or redirect to an error page\n      navigate(ROUTES.ERROR);\n    } else if (!isFetching && !isLoading && !isSuccess) {\n      navigate(ROUTES.HOME);\n    }\n  }, [isError, isFetching, isLoading, isSuccess, navigate]);\n  useEffect(() => {\n    if (data && list.length) {\n      var _data$category;\n      dispatch(getRelatedProducts(data === null || data === void 0 ? void 0 : (_data$category = data.category) === null || _data$category === void 0 ? void 0 : _data$category.id));\n    }\n  }, [data, dispatch, list.length]);\n  if (isLoading || isFetching) {\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"preloader\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [data && /*#__PURE__*/_jsxDEV(Product, {\n      ...data\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 22\n    }, this), related && /*#__PURE__*/_jsxDEV(Products, {\n      products: related,\n      amount: 5,\n      title: \"Related products\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 25\n    }, this)]\n  }, void 0, true);\n};\n_s(SingleProduct, \"7jV0G+c1Qbz3bxm8QfJtZ142KoE=\", false, function () {\n  return [useDispatch, useParams, useNavigate, useSelector, useGetProductQuery];\n});\n_c = SingleProduct;\nexport default SingleProduct;\nvar _c;\n$RefreshReg$(_c, \"SingleProduct\");","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","useNavigate","useParams","useGetProductQuery","getRelatedProducts","ROUTES","Product","Products","jsxDEV","_jsxDEV","Fragment","_Fragment","SingleProduct","_s","dispatch","id","navigate","list","related","products","data","isLoading","isFetching","isSuccess","isError","ERROR","HOME","length","_data$category","category","className","children","fileName","_jsxFileName","lineNumber","columnNumber","amount","title","_c","$RefreshReg$"],"sources":["/Users/My Disk D/Developt/some_shop/src/components/Products/SingleProduct.jsx"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useNavigate, useParams } from \"react-router-dom\";\n\nimport { useGetProductQuery } from \"../../features/api/apiSlice\";\nimport { getRelatedProducts } from \"../../features/products/productsSlice\";\n\nimport { ROUTES } from \"../../utils/routes\";\n\nimport Product from \"./Product\";\nimport Products from \"./Products\";\n\nconst SingleProduct = () => {\n    const dispatch = useDispatch();\n    const { id } = useParams();\n    const navigate = useNavigate();\n    const { list, related } = useSelector(({ products }) => products);\n\n    const { data, isLoading, isFetching, isSuccess, isError } = useGetProductQuery({ id });\n\n    useEffect(() => {\n        if (isError) {\n            // Handle error, display error message, or redirect to an error page\n            navigate(ROUTES.ERROR);\n        } else if (!isFetching && !isLoading && !isSuccess) {\n            navigate(ROUTES.HOME);\n        }\n    }, [isError, isFetching, isLoading, isSuccess, navigate]);\n\n    useEffect(() => {\n        if (data && list.length) {\n            dispatch(getRelatedProducts(data?.category?.id));\n        }\n    }, [data, dispatch, list.length]);\n\n    if (isLoading || isFetching) {\n        return <section className=\"preloader\">Loading...</section>;\n    }\n\n    return (\n        <>\n            {data && <Product {...data} />}\n            {related && <Products products={related} amount={5} title=\"Related products\" />}\n        </>\n    );\n};\n\nexport default SingleProduct;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,WAAW,EAAEC,SAAS,QAAQ,kBAAkB;AAEzD,SAASC,kBAAkB,QAAQ,6BAA6B;AAChE,SAASC,kBAAkB,QAAQ,uCAAuC;AAE1E,SAASC,MAAM,QAAQ,oBAAoB;AAE3C,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,QAAQ,MAAM,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAElC,MAAMC,aAAa,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACxB,MAAMC,QAAQ,GAAGf,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAEgB;EAAG,CAAC,GAAGb,SAAS,CAAC,CAAC;EAC1B,MAAMc,QAAQ,GAAGf,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAEgB,IAAI;IAAEC;EAAQ,CAAC,GAAGlB,WAAW,CAAC,CAAC;IAAEmB;EAAS,CAAC,KAAKA,QAAQ,CAAC;EAEjE,MAAM;IAAEC,IAAI;IAAEC,SAAS;IAAEC,UAAU;IAAEC,SAAS;IAAEC;EAAQ,CAAC,GAAGrB,kBAAkB,CAAC;IAAEY;EAAG,CAAC,CAAC;EAEtFjB,SAAS,CAAC,MAAM;IACZ,IAAI0B,OAAO,EAAE;MACT;MACAR,QAAQ,CAACX,MAAM,CAACoB,KAAK,CAAC;IAC1B,CAAC,MAAM,IAAI,CAACH,UAAU,IAAI,CAACD,SAAS,IAAI,CAACE,SAAS,EAAE;MAChDP,QAAQ,CAACX,MAAM,CAACqB,IAAI,CAAC;IACzB;EACJ,CAAC,EAAE,CAACF,OAAO,EAAEF,UAAU,EAAED,SAAS,EAAEE,SAAS,EAAEP,QAAQ,CAAC,CAAC;EAEzDlB,SAAS,CAAC,MAAM;IACZ,IAAIsB,IAAI,IAAIH,IAAI,CAACU,MAAM,EAAE;MAAA,IAAAC,cAAA;MACrBd,QAAQ,CAACV,kBAAkB,CAACgB,IAAI,aAAJA,IAAI,wBAAAQ,cAAA,GAAJR,IAAI,CAAES,QAAQ,cAAAD,cAAA,uBAAdA,cAAA,CAAgBb,EAAE,CAAC,CAAC;IACpD;EACJ,CAAC,EAAE,CAACK,IAAI,EAAEN,QAAQ,EAAEG,IAAI,CAACU,MAAM,CAAC,CAAC;EAEjC,IAAIN,SAAS,IAAIC,UAAU,EAAE;IACzB,oBAAOb,OAAA;MAASqB,SAAS,EAAC,WAAW;MAAAC,QAAA,EAAC;IAAU;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAS,CAAC;EAC9D;EAEA,oBACI1B,OAAA,CAAAE,SAAA;IAAAoB,QAAA,GACKX,IAAI,iBAAIX,OAAA,CAACH,OAAO;MAAA,GAAKc;IAAI;MAAAY,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,EAC7BjB,OAAO,iBAAIT,OAAA,CAACF,QAAQ;MAACY,QAAQ,EAAED,OAAQ;MAACkB,MAAM,EAAE,CAAE;MAACC,KAAK,EAAC;IAAkB;MAAAL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA,eACjF,CAAC;AAEX,CAAC;AAACtB,EAAA,CAjCID,aAAa;EAAA,QACEb,WAAW,EACbG,SAAS,EACPD,WAAW,EACFD,WAAW,EAEuBG,kBAAkB;AAAA;AAAAmC,EAAA,GAN5E1B,aAAa;AAmCnB,eAAeA,aAAa;AAAC,IAAA0B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}